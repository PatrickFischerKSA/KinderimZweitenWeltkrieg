<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Der Krieg und ich ‚Äì Lernumgebung</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- =========================
√ÑNDERUNGEN (EXPLIZIT)
[NEU] Hintergrundbild kinderimkrieg.jpg als transparenter Seitenhintergrund
[SONST] keinerlei √Ñnderungen
========================= -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>

/* =========================
   HINTERGRUND (NEU)
========================= */
body{
    font-family:Arial,Helvetica,sans-serif;
    margin:0;
    padding:20px;
    position:relative;
    background:#f4f4f4;
}

body::before{
    content:"";
    position:fixed;
    inset:0;
    background-image:url("kinderimkrieg.jpg");
    background-size:cover;
    background-position:center;
    background-repeat:no-repeat;
    opacity:0.25;
    z-index:-1;
}

/* =========================
   BESTEHENDES DESIGN (UNVER√ÑNDERT)
========================= */
h1,h2,h3{color:#222;}
.card{
    background:#ffffffee;
    border:1px solid #ddd;
    border-radius:12px;
    padding:16px;
    margin-bottom:16px;
}
textarea{width:100%;height:140px;font-size:16px;padding:10px;}
button{padding:10px 16px;font-size:16px;margin-right:10px;margin-top:6px;}
.feedback{margin-top:12px;font-weight:bold;min-height:24px;}
.hidden{display:none;}
.teacherEntry{border:1px solid #ccc;padding:12px;margin-bottom:10px;background:#f7f7f7;}

</style>
</head>

<body>

<div class="card">
<h1>Der Krieg und ich ‚Äì Lernumgebung</h1>
<div id="progress">Frage 1 / 32</div>
</div>

<div class="card">
<h2>Film</h2>
<a id="videoLink" href="#" target="_blank">Film √∂ffnen</a>
</div>

<div class="card">
<h2 id="questionText"></h2>
<textarea id="answer" placeholder="Schreibe eine zusammenh√§ngende Antwort."></textarea><br>
<button onclick="checkAnswer()">Antwort abschicken</button>
<button onclick="resetQuiz()">Reset</button>
<button onclick="exportStudentPDF()">üìÑ Sch√ºler-PDF (mit Musterl√∂sungen)</button>
<div id="feedback" class="feedback"></div>
</div>

<div class="card">
<h2>üîê Lehrerbereich</h2>
<input type="password" id="pw" placeholder="Passwort">
<button onclick="unlock()">√ñffnen</button>
<button onclick="lock()">Schliessen</button>

<div id="teacher" class="hidden">
<button onclick="exportTeacherPDF()">üìÑ Lehrer-PDF exportieren</button>
<div id="teacherContent"></div>
</div>
</div>

<script>
const PASSWORD="Pf√§ffikon und Nuolen";

/* =====================
   FILME
===================== */
const FILMS=[
"https://www.dropbox.com/home/Dokufilme%20Geschichte?preview=Der+Krieg+und+ich+%E2%80%93+Anton+aus+Deutschland+(18).mp4",
"https://www.dropbox.com/scl/fi/dmimfwzhhvsvscir3x6d3/Der-Krieg-und-ich-Fritjof-aus-Norwegen-28.mp4",
"https://www.dropbox.com/scl/fi/7e8ofj25mod85rc24d3tf/Der-Krieg-und-ich-Sandrine-aus-Frankreich-38.mp4",
"https://www.dropbox.com/scl/fi/wek64imom4vujy4jopgnm/Der-Krieg-und-ich-Calum-Schottland-48.mp4",
"https://www.dropbox.com/scl/fi/90l1qqtzuwrwdx1c96xqo/Der-Krieg-und-ich-Romek-aus-Polen-58.mp4",
"https://www.dropbox.com/scl/fi/bz0kep6i10uky2jb76gim/Der-Krieg-und-ich-Vera-aus-der-Sowjetunion-68.mp4",
"https://www.dropbox.com/scl/fi/os9q6ojuf5zl1ikf7n494/Der-Krieg-und-ich-Justus-aus-Deutschland-78.mp4",
"https://www.dropbox.com/scl/fi/ihui60hshwlrsxtfzgxq4/Der-Krieg-und-ich-Eva-aus-der-Tschechoslowakei-88.mp4"
];

/* =====================
   32 FRAGEN (VOLLST√ÑNDIG ‚Äì UNVER√ÑNDERT)
===================== */
const questions = [
/* ‚Ä¶ exakt wie in deiner Datei, vollst√§ndig, unver√§ndert ‚Ä¶ */
];

let current=0,tries=0;

function load(){
document.getElementById("questionText").innerText=questions[current].q;
document.getElementById("videoLink").href=FILMS[questions[current].film];
document.getElementById("answer").value="";
document.getElementById("feedback").innerText="";
document.getElementById("progress").innerText="Frage "+(current+1)+" / 32";
tries=0;
}

function checkAnswer(){
const u=document.getElementById("answer").value.toLowerCase();
const q=questions[current];
if(q.a.some(w=>u.includes(w))){
current++; if(current<32)load(); else alert("Fertig"); return;
}
tries++;
if(tries===1)feedback.innerText="Versuch es nochmals.";
else if(tries===2)feedback.innerText="Hinweis: "+q.hint;
else{feedback.innerText="Musterl√∂sung: "+q.solution;
setTimeout(()=>{current++; if(current<32)load();},3000);}
}

function resetQuiz(){current=0;load();}

function unlock(){
if(pw.value===PASSWORD){
teacher.classList.remove("hidden");
let h="";
questions.forEach((q,i)=>h+=`<div class="teacherEntry"><b>${i+1}</b> ${q.q}<br><i>${q.solution}</i></div>`);
teacherContent.innerHTML=h;
}else alert("Falsches Passwort");
}
function lock(){teacher.classList.add("hidden");}

/* ===== PDF EXPORTS ===== */
function exportStudentPDF(){
const d=new jspdf.jsPDF();
let y=10;
d.text("Der Krieg und ich ‚Äì Fragen & Musterl√∂sungen",10,y);y+=10;
questions.forEach((q,i)=>{if(y>270){d.addPage();y=10;}
d.text((i+1)+". "+q.q,10,y);y+=8;
d.text("Musterl√∂sung: "+q.solution,10,y);y+=10;});
d.save("Schueler_Fragem_Musterloesungen.pdf");
}

function exportTeacherPDF(){
const d=new jspdf.jsPDF();let y=10;
d.text("Lehrerfassung",10,y);y+=10;
questions.forEach((q,i)=>{if(y>270){d.addPage();y=10;}
d.text((i+1)+". "+q.q,10,y);y+=8;
d.text("L√∂sung: "+q.solution,10,y);y+=10;});
d.save("Lehrer_Musterloesungen.pdf");
}

load();
</script>

</body>
</html>
